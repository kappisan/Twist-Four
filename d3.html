<!DOCTYPE html>
<meta charset="utf-8">

<style>

.segment {
    fill: #AA0;
}

.empty-square {
	fill: #CCC;
}

.empty-square:hover {
	fill: #DDD;
}


.red-square {
	fill: #C00;
}

.blue-square {
	fill: #00C;
}

svg {
	position: relative;
	margin: auto;
	left: 0;
	right: 0;
}

.board {

}

</style>

<body>
<script src="./libs/d3.min.js"></script>

<svg class="board"></svg>

<script>

var width = 700,
    height = 700,
    segmentGap = 5,
    segmentSize = 300,
    squaresPerSeg = 4,    
    squarePadding = 5,
    squareSize = 142;


var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

var board = [ 
	["blank","blank","blank","blank"],
	["blank","red","blank","blank"],
	["blue","blank","blank","blank"],
	["blank","blank","blank","blank"]
];

board.forEach(function(d,i) {

	var g = svg.append("g")
		    .attr("x", function() {
		    	if(i == 0 || i == 1) return 0;
		    	else return segmentSize + segmentGap;
		    })
		    .attr("y", function() {
		    	if(i == 0 || i == 2) return 0;
		    	else return segmentSize + segmentGap;
		    })
		    .attr("height", segmentSize)
	    	.attr("width", segmentSize)
	    	.on("click", function() {
	    		console.log("group clicked", g);
	    	});

	g.append("rect")
	    .attr("class", "segment s"+i)
	    .attr("x", function() {
	    	if(i == 0 || i == 1) return 0;
	    	else return segmentSize + segmentGap;
	    })
	    .attr("y", function() {
	    	if(i == 0 || i == 2) return 0;
	    	else return segmentSize + segmentGap;
	    })
	    .attr("height", segmentSize)
	    .attr("width", segmentSize);

	d.forEach(function(s,j) {

		g.append("rect")
		    .attr("class", function() {
		    	if(s == "blank") return "empty-square";
		    	else if(s == "red") return "red-square";
		    	else if(s == "blue") return "blue-square";
		    	else return "empty-square";
		    })
		    .attr("x", function() {
		    	if(j == 0 || j == 1) return squarePadding;
		    	else return squareSize + (2 * squarePadding);
		    })
		    .attr("y", function() {
		    	if(j == 0 || j == 2) return squarePadding;
		    	else return squareSize + (2 * squarePadding);
		    })
		    .attr("transform", function() {
		    	if(i == 1) return "translate(0, "+(segmentSize+segmentGap)+")";
		    	if(i == 2) return "translate("+(segmentSize+segmentGap)+", 0)";
		    	if(i == 3) return "translate("+(segmentSize+segmentGap)+", "+(segmentSize+segmentGap)+")";
		    })
		    .attr("height", squareSize)
		    .attr("width", squareSize)
		    .on("click", function(d) {
		    	console.log("d", j, i, s, this);
		    })
	});

});

</script>